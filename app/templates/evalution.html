{% extends "base.html" %}
{% block content %}
<style>
  .form-label {
    font-weight: 600;
    margin-bottom: 1px;
    display: block;
  }
  .input-row {
    margin-bottom: 18px;
    display: flex;
    flex-direction: column;
  }
  input[type="text"], input[type="date"], select, textarea {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    padding: 7px 14px;
    border-radius: 4px;
    border: 1px solid #ced4da;
    font-size: 1rem;
  }
  .form-control, .form-select {
    width: 100% !important;
    max-width: 100% !important;
  }
  .form-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    margin-top: 24px;
  }
  .card a {
    margin-bottom: 1rem;
    display: inline-block;
    font-size: 1rem;
  }
</style>

<div class="container">
  <div class="card">
    <h1>Step 3: Offer Evaluation Committee</h1>
    <form method="POST" enctype="multipart/form-data">
      {{ form.hidden_tag() }}

      <div class="input-row">
        <label class="form-label">Evaluation Date:</label>
        {{ form.offer_eval_date(class="form-control") }}
      </div>

      <div class="input-row">
        <label class="form-label">Project Title:</label>
        <input type="text" class="form-control" value="{{ rsqr_title }}" readonly>
      </div>

      <div class="input-row">
        <label class="form-label">Meeting Location:</label>
        {{ form.meeting_location(class="form-control") }}
      </div>

      <div class="input-row">
        <label class="form-label">Principal Investigator (PI):</label>
        <input type="text" name="pi_name" class="form-control" value="{{ pi_name }}">

      </div>

      <div class="input-row">
        <label class="form-label">Institute:</label>
        <input type="text" name="institute" class="form-control" value="{{ institute }}">

      </div>

      <div class="input-row">
        <label class="form-label">Committee Chairperson:</label>
        {{ form.eval_chairperson(class="form-control") }}
      </div>

      <div class="input-row">
        <label class="form-label">Members:</label>
        {{ form.eval_member(class="form-control") }}
      </div>

      <div class="input-row">
        <label class="form-label">Users Present:</label>
        {{ form.eval_user(class="form-control") }}
      </div>

      <div class="input-row">
        <label class="form-label">Upload PDF:</label>
        {{ form.evaluation_pdf(class="form-control") }}
        
        {% if offer_evaluation and offer_evaluation.evaluation_pdf %}
          <p class="uploaded-file-link mt-2">
            Already uploaded:
            <a href="{{ url_for('static', filename='uploads/' ~ offer_evaluation.evaluation_pdf) }}" target="_blank">
              {{ offer_evaluation.evaluation_pdf }}
            </a>
          </p>
        {% endif %}
      </div>

       <div class="d-flex justify-content-end gap-2 mt-4">
                <button type="submit" name="back" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Back</button>
                <button type="submit" name="save" class="btn btn-success"><i class="bi bi-save"></i> Save</button>
                <button type="submit" name="next" class="btn btn-primary"><i class="bi bi-arrow-right"></i> Next</button>
            </div>

      
    </form>
  </div>
</div>
{% endblock %}
